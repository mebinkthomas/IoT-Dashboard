<%- include('./partials/header.ejs') %>
    <div class="wrapper">
        <%- include('./partials/sideNav.ejs') %>
        <div class="main">
            <%- include('./partials/topbar.ejs') %>
            <% let userId = user.id %>
            <section class="mt-1">
                <div class="settings-info container">
                    <p class="subheading">Delete Account</p>
                    <button class="btn btn-danger mt-2">Delete Account</button>
                </div>
            </section>
        </div>
    </div> 
    <script>
        const button = document.querySelector('button');
        button.addEventListener('click', async()=>{
            try {
                let id = '<%= userId %>';
                const res = await fetch(`/dashboard/profile/${id}`, { method: 'DELETE' });
                const data = await res.json();
                if(data.msg === 'success'){
                    window.location.href = '/login';
                }
            } catch (err) {
                console.log(err);
            }
        });
    </script>
<%- include('./partials/footer.ejs') %>